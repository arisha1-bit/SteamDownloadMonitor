# SteamDownloadMonitor

Небольшой скрипт для фонового отслеживания скорости загрузки игр в Steam. Скрипт не привязан к папке установки Steam и сам находит лаунчер через реестр Windows.

Решение направлено на фоновый мониторинг и демонстрирует логику работы с состоянием загрузок Steam без использования неофициальных API.

# Что делает скрипт

Скрипт определяет, какая игра в данный момент скачивается в Steam, и раз в минуту выводит в консоль скорость загрузки. Дополнительно он пытается понять, активна ли загрузка или находится на паузе, и показывает текущий статус.

Скорость считается как прирост данных во временной папке загрузки Steam, поэтому результат близок к реальной скорости, которую видит пользователь в лаунчере.

# Как это работает

Steam сохраняет временные файлы загрузки в папке steamapps/downloading. Внутри нее каждая игра имеет свою директорию с числовым appid.

## Скрипт:

- находит путь к Steam через реестр Windows;

- определяет активную папку загрузки;

- читает название игры из appmanifest_<appid>.acf;

- раз в заданный интервал считает изменение размера файлов;

- на основе этого рассчитывает скорость и статус загрузки;

Официального API для получения текущей скорости загрузки в Steam нет, поэтому этот подход является best-effort и подходит для мониторинга и автоматизации.

# Требования

Windows

Python 3.9+

Установленный Steam

Активная загрузка игры в Steam

Внешние библиотеки не используются.

# Запуск

Перед запуском убедитесь, что в Steam идет загрузка игры.

Обычный запуск:

```python steam_download_monitor.py```


По умолчанию скрипт выводит информацию раз в минуту в течение 5 минут.

Запуск в фоне (Windows):

```python steam_download_monitor.py --background```


В этом режиме скрипт перезапускается как фоновый процесс без открытия нового окна консоли.

# Параметры запуска

Можно переопределить время работы и интервал вывода:

```python steam_download_monitor.py --minutes 10 --interval 60```


--minutes - сколько минут вести наблюдение

--interval - интервал между измерениями в секундах

--background - запустить в фоне (Windows)

Пример вывода
[21:04:12] Steam found at: D:\Steam
[21:04:12] Monitoring download speed...
[21:05:12] Cyberpunk 2077 (AppID 1091500) - downloading - speed 22.41 MB/s (179.3 Mbit/s)
[21:06:12] Cyberpunk 2077 (AppID 1091500) - paused or idle - speed 0.02 MB/s (0.16 Mbit/s)


Если за интервал объем данных почти не меняется, скрипт помечает статус как paused or idle.

# Ограничения

- Скрипт не использует внутренние API Steam и не вмешивается в работу лаунчера.

- Статус паузы определяется эвристически, по отсутствию прироста данных. В редких случаях Steam может временно не писать данные на диск, несмотря на активную загрузку.

- Поддерживается только Windows-версия Steam.
---
# Для чего это может быть полезно

- мониторинг загрузок на игровых или тестовых машинах

- автоматизация контроля состояния Steam

- аналитика и диагностика проблем с загрузкой

- демонстрация подхода к интеграции с клиентскими лаунчерами без официального API
